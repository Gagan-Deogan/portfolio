<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="Web site created using create-react-app"
    />
    <link rel = "icon" href = "./logo_icon-03.png">
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    <title>Gagan Deogan | Home</title>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
    <script>
      function init(){
        function elementInViewport2(el) {
      var top = el.offsetTop;
      var left = el.offsetLeft;
      var width = el.offsetWidth;
      var height = el.offsetHeight;

      while(el.offsetParent) {
          el = el.offsetParent;
          top += el.offsetTop;
          left += el.offsetLeft;
      }

      return (
          top >= window.pageYOffset &&
          left >= window.pageXOffset &&
          (top + height) <= (window.pageYOffset + window.innerHeight) &&
          (left + width) <= (window.pageXOffset + window.innerWidth)
      );
  }
  // nav bar setting
  function onVisibilityChange(el, callback) {
      var old_visible;
      return function () {
          el.forEach((ele,index)=>{
              if(elementInViewport2(ele)){
                  var visible = index;
                  if (visible != old_visible && old_visible!==undefined ) {
                      if (typeof callback == 'function') {
                          callback(visible,old_visible);
                          old_visible = visible;
                      }
                  }else{
                      if(old_visible===undefined){
                          console.log('here its is');
                          const underlines = document.querySelectorAll('.options_underline');
                          const resposive_underline = document.querySelectorAll('.res_options');
                          if(underlines){
                              underlines[visible].style.width = '110%';
                          }
                          if(resposive_underline){
                              resposive_underline[visible].classList.add('nav_active');
                          }
                          old_visible = visible;
                      }
                  }
              } 
          });
      }
    }
    console.log('gog')
        const isActive = document.querySelectorAll('.is_active');
        var handler = onVisibilityChange(isActive, function(visible,old_visible){
            old_visible = old_visible || 0;
            const underlines = document.querySelectorAll('.options_underline');
            const resposive_underline = document.querySelectorAll('.res_options');
            if(underlines){
                underlines[visible].style.width = '110%';
                underlines[old_visible].style.width = '0px';            
            }
            if(resposive_underline){
                resposive_underline[visible].classList.add('nav_active');
                resposive_underline[old_visible].classList.remove('nav_active');
            }
        });
        if (window.addEventListener) {
            addEventListener('DOMContentLoaded', handler, false);
            addEventListener('load', handler, false);
            addEventListener('scroll', handler, false);
            addEventListener('resize', handler, false);
            handler();
        } else if (window.attachEvent)  {
            attachEvent('onDOMContentLoaded', handler); // Internet Explorer 9+ :(
            attachEvent('onload', handler);
            attachEvent('onscroll', handler);
            attachEvent('onresize', handler);
            handler();
        }
      }
      window.addEventListener('load',init);
    </script>
  </body>
</html>
